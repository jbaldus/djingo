{# templates/bingo/join_game.html #}
{% extends "bingo/base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container">
    <div class="join-game-form">
        <h2>Join Game: {{ game.name }}</h2>
        <form method="post">
            {% csrf_token %}
            {% crispy form %}
        </form>
    </div>
</div>
<script>
    const randomizeBtn = document.getElementById("randomize-btn");
    const nicknameInput = document.getElementById("id_nickname");

    randomizeBtn.addEventListener("click", () => {
        fetch("{% url 'random_nickname' game.code %}", {
            method: "GET",
            headers: {
                "X-Requested-With": "XMLHttpRequest",
            },
        })
        .then(response => response.json())
        .then(data => {
            nicknameInput.value = data.nickname;
        });
    });
</script>
{% endblock %}