{# templates/bingo/play_game.html #}
{% extends 'bingo/base.html' %}
{% load bingo_tags %}

{% block content %}
<div id="websocket-connection" hx-ext="ws" ws-connect="/ws/game/{{ player.id }}/">
<div class="container">
    <div class="game-header">
        <h1>WGI Bingo</h1>
        <div class="player-info">
            Playing as: <strong>{{ player.name }}</strong>
        </div>
    </div>

    <div class="bingo-board board-{{ game.board_size }}x{{ game.board_size }}" 
        id="bingoBoard" 
        data-player-id="{{ player.id }}"
        data-board-size="{{ game.board_size }}"
        data-win-condition="{{ game.win_condition }}">
        {# Loop through the items and their positions #}
        {% for item, position in board_items|zip:board_positions %}  
            {% bingo_cell item position player game %}
        {% endfor %}
    </div>

    <div id="winnerModal"></div>
    <div id="errorMessage" class="error-message" style="display: none;"></div>
    <div id="connectedPlayers" class="connected-players"></div>
    <div class="game-events">
        <div id="eventsList" class="events-list"></div>
    </div>
    <p class="made-with-love">Made with ❤️ for winterguards and the amazing things they do by Jason Baldus. Go Reeths-Puffer!</p>
    </div>
</div>
{% endblock %}
